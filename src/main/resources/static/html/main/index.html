<!DOCTYPE html><html lang="en" class="app"><head>  <meta charset="utf-8" />  <link rel="shortcut  icon" type="image/x-icon" href="../image/icon.png" media="screen"  />  <title>看风了风</title>  <meta name="description" content="app, web app, responsive, admin dashboard, admin, flat, flat ui, ui kit, off screen nav" />  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />  <link rel="stylesheet" href="../../plugins/jPlayer/jplayer.flat.css" type="text/css" />  <link rel="stylesheet" href="../../css/bootstrap.css" type="text/css" />  <link rel="stylesheet" href="../../css/animate.css" type="text/css" />  <link href="../../css/font-awesome.css?v=4.4.0" rel="stylesheet">  <link rel="stylesheet" href="../../css/simple-line-icons.css" type="text/css" />  <link rel="stylesheet" href="../../css/font.css" type="text/css" />  <link rel="stylesheet" href="../../css/app.css" type="text/css" />  <!-- sweet-alert -->  <link rel="stylesheet" type="text/css" href="../../plugins/sweet-alert/sweet-alert.css" />  <script src="../../plugins/sweet-alert/sweet-alert.min.js"></script>  <link rel="stylesheet" href="../../css/loaders.css" type="text/css"/>    <!--[if lt IE 9]>    <script src="../../plugins/ie/html5shiv.js"></script>    <script src="../../plugins/ie/respond.min.js"></script>    <script src="../../plugins/ie/excanvas.js"></script>  <![endif]-->  <style>    .red{      color:red;    }  </style></head><body><div id="loading" class="loading-wrap" style="display: none">  <div class="loader" >    <div class="la-ball-clip-rotate-multiple la-3x">      <div></div>      <div></div>    </div>    <div class="loaderTxt">数据加载中...</div>  </div></div>  <input type="hidden" id="resourceType" >  <section class="vbox">    <header class="bg-white-only header header-md navbar navbar-fixed-top-xs">      <div style="background-color: #6195FF" class="navbar-header bg-info aside nav-xs">        <a class="btn btn-link visible-xs" data-toggle="class:nav-off-screen,open" data-target="#nav,html">          <i class="icon-list"></i>        </a>        <a href="/main" class="navbar-brand text-lt">          <i class="icon-social-youtube"></i>          <img src="images/logo.png" alt="." class="hide">          <span class="hidden-nav-xs m-l-sm">看风了风</span>        </a>        <a class="btn btn-link visible-xs" data-toggle="dropdown" data-target=".user">          <i class="icon-settings"></i>        </a>      </div>      <ul class="nav navbar-nav hidden-xs">        <li>          <a id="navOperate" href="#nav,.navbar-header" data-toggle="class:nav-xs,nav-xs" class="text-muted">            <i class="fa fa-indent text"></i>            <i class="fa fa-dedent text-active"></i>          </a>        </li>      </ul>      <div class="navbar-right ">        <ul class="nav navbar-nav m-n hidden-xs nav-user user">          <li class="dropdown">            <a href="#" class="dropdown-toggle bg clear" data-toggle="dropdown">              <span class="thumb-sm avatar pull-right m-t-n-sm m-b-n-sm m-l-sm">                <img src="../../image/avatar.png" alt="...">              </span>              <span id="account"></span> <b class="caret"></b>            </a>            <ul class="dropdown-menu animated fadeInRight">                          <li>                <span class="arrow top"></span>                <a id="setting" href="javascript:void(0)">设置</a>              </li>              <li>                <a href="javascript:void(0)">                  <span class="badge bg-danger pull-right">3</span>                  通知                </a>              </li>              <li>                <a href="javascript:void(0)">帮助</a>              </li>              <li class="divider"></li>              <li>                <a id="logout" href="javascript:void(0)" data-toggle="ajaxModal" >退出</a>              </li>            </ul>          </li>        </ul>      </div>          </header>    <section>      <section class="hbox stretch">        <!-- .aside -->        <aside class="bg-black dk nav-xs aside hidden-print" id="nav">                    <section class="vbox">            <section class="w-f-md scrollable">              <div class="slim-scroll" data-height="auto" data-disable-fade-out="true" data-distance="0" data-size="10px" data-railOpacity="0.2">                <!-- nav -->                <nav class="nav-primary hidden-xs">                  <ul class="nav" data-ride="collapse">                    <li id="basic" style="display: none" class="hidden-nav-xs padder m-t m-b-sm text-xs text-muted">                      Basic                    </li>                    <li id="basicOperate" style="display: none">                      <a href="javascript:void(0)" class="auto">                        <span class="pull-right text-muted">                          <i class="fa fa-angle-left text"></i>                          <i class="fa fa-angle-down text-active"></i>                        </span>                        <i class="icon-screen-desktop icon">                        </i>                        <span>基础信息</span>                      </a>                      <ul class="nav dk text-sm">                        <li >                          <a href="javascript:redirect('userInfo')" class="auto">                            <i class="icon-users text-xs"></i>                            <span>用户管理</span>                          </a>                        </li>                        <li >                          <a href="javascript:redirect('wxinfo')" class="auto">                            <i class="fa fa-wechat text-xs"></i>                            <span>微信管理</span>                          </a>                        </li>                        <li >                          <a href="javascript:redirect('resource')" class="auto">                            <i class="fa fa-files-o text-xs"></i>                            <span>资源管理</span>                          </a>                        </li>                        <li >                          <a href="javascript:redirect('tvs')" class="auto">                            <i class="fa fa-video-camera text-xs"></i>                            <span>电视管理</span>                          </a>                        </li>                        <li >                          <a href="javascript:redirect('feedback')" class="auto">                            <i class="fa fa-feed text-xs"></i>                            <span>反馈管理</span>                          </a>                        </li>                      </ul>                    </li>                  </ul>                  <ul class="nav bg clearfix">                    <li class="hidden-nav-xs padder m-t m-b-sm text-xs text-muted">                      Discover                    </li>                    <li>                      <a href="/main">                        <i class="icon-home text-info"></i>                        <span class="font-bold">首页</span>                      </a>                    </li>                    <li>                      <a href="javascript:void(0)">                        <i class="icon-disc icon text-success"></i>                        <span class="font-bold">What's new</span>                      </a>                    </li>                    <li>                      <a href="javascript:void(0)">                        <i class="icon-music-tone-alt icon text-info"></i>                        <span class="font-bold">Genres</span>                      </a>                    </li>                    <li>                      <a href="javascript:void(0)">                        <i class="icon-drawer icon text-primary-lter"></i>                        <b class="badge bg-primary pull-right">6</b>                        <span class="font-bold">Events</span>                      </a>                    </li>                    <li>                      <a href="javascript:void(0)">                        <i class="icon-list icon  text-info-dker"></i>                        <span class="font-bold">Listen</span>                      </a>                    </li>                    <li>                      <a href="javascript:void(0)" data-target="#content" data-el="#bjax-el" data-replace="true">                        <i class="icon-social-youtube icon  text-primary"></i>                        <span class="font-bold">Video</span>                      </a>                    </li>                    <li class="m-b hidden-nav-xs"></li>                  </ul>                  <ul class="nav text-sm">                    <li class="hidden-nav-xs padder m-t m-b-sm text-xs text-muted">                      Playlist                    </li>                    <li>                      <a href="javascript:void(0)">                        <i class="icon-music-tone icon"></i>                        <span>Hip-Pop</span>                      </a>                    </li>                    <li>                      <a href="javascript:void(0)">                        <i class="icon-playlist icon text-success-lter"></i>                        <b class="badge bg-success dker pull-right">9</b>                        <span>Jazz</span>                      </a>                    </li>                  </ul>                </nav>                <!-- / nav -->              </div>            </section>                        <footer class="footer hidden-xs no-padder text-center-nav-xs">              <div class="bg hidden-xs ">                  <div class="dropdown dropup wrapper-sm clearfix">                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">                      <span class="thumb-sm avatar pull-left m-l-xs">                                                <img src="images/a3.png" class="dker" alt="...">                        <i class="on b-black"></i>                      </span>                      <span class="hidden-nav-xs clear">                        <span class="block m-l">                          <strong class="font-bold text-lt">John.Smith</strong>                           <b class="caret"></b>                        </span>                        <span class="text-muted text-xs block m-l">Art Director</span>                      </span>                    </a>                    <ul class="dropdown-menu animated fadeInRight aside text-left">                                            <li>                        <span class="arrow bottom hidden-nav-xs"></span>                        <a href="#">Settings</a>                      </li>                      <li>                        <a href="profile.html">Profile</a>                      </li>                      <li>                        <a href="#">                          <span class="badge bg-danger pull-right">3</span>                          Notifications                        </a>                      </li>                      <li>                        <a href="docs.html">Help</a>                      </li>                      <li class="divider"></li>                      <li>                        <a href="modal.lockme.html" data-toggle="ajaxModal" >Logout</a>                      </li>                    </ul>                  </div>                </div>            </footer>          </section>        </aside>        <!-- /.aside -->        <section id="content">          <iframe id="mainframe" name="myFrame" width="100%" height="100%" src="/main/redirect?htmlName=main" frameborder="0" data-id="" seamless></iframe>          <a href="#" class="hide nav-off-screen-block" data-toggle="class:nav-off-screen,open" data-target="#nav,html"></a>        </section>      </section>    </section>      </section>  <!--设置模态框-->  <!--data-backdrop="static"-->  <div class="modal fade" id="settingModal"  tabindex="-1" role="dialog" aria-labelledby="settingModalLabel" aria-hidden="true">    <div class="modal-dialog modal-md">      <div class="modal-content">        <div class="modal-header">          <button type="button" class="close" data-dismiss="modal"                  aria-hidden="true">×          </button>          <h4 class="modal-title" id="editModalLabel">            个人设置&nbsp;&nbsp;<span id="tip"></span>          </h4>        </div>        <div class="modal-body">          <form class="form-horizontal">            <div class="form-group">              <label class="col-sm-2 control-label form-label"></label>              <div class="col-sm-10">                <p class="form-control-static"></p>              </div>            </div>            <div class="form-group">              <label for="settingAccount" class="col-sm-2 control-label form-label"><span class="red">*</span>系统账号</label>              <div class="col-sm-10">                <input type="hidden" id="settingId">                <input type="text" class="form-control" maxlength="20" style="ime-mode:disabled" id="settingAccount" onKeyUp="value=value.replace(/[^/a-zA-Z0-9]/g,'')" placeholder="账号只能设置一次">                <span class="help-block"></span>              </div>            </div>            <div class="form-group">              <label for="password" class="col-sm-2 control-label form-label"><span class="red">*</span>账号密码</label>              <div class="col-sm-10">                <input type="password" value="********" class="form-control" id="password" maxlength="30" placeholder="Password">              </div>            </div>            <div class="form-group">              <label for="name" class="col-sm-2 control-label form-label">用户昵称</label>              <div class="col-sm-10">                <input type="text" onkeyup="value=value.replace(/[^/a-zA-Z\0-9\u4E00-\u9FA5]/g,'')" maxlength="15" class="form-control" id="name" placeholder="Name" >              </div>            </div>            <div class="form-group">              <label for="phone" class="col-sm-2 control-label form-label">手机号码</label>              <div class="col-sm-10">                <input type="text" onkeyup="this.value=this.value.replace(/\D/g,'')" class="form-control" maxlength="11" id="phone" placeholder="Phone" >              </div>            </div>            <div class="form-group">              <label for="email" class="col-sm-2 control-label form-label"><span class="red">*</span>用户邮箱</label>              <div class="col-sm-10">                <input type="email"  class="form-control" onKeyUp="value=value.replace(/[^/a-zA-Z0-9.@]/g,'')" maxlength="40" id="email" placeholder="Email" >                <br>                <input id="codeInput" type="email"  class="form-control" style="width:96px;float: left;text-align: center;display: none" onKeyUp="value=value.replace(/[^/a-zA-Z0-9]/g,'')" maxlength="6" placeholder="邮箱验证码" >                <button type="button" id="changeBtn" class="btn btn-info">更换邮箱</button>                &nbsp;&nbsp;                <button style="display: none" type="button" id="codeBtn" class="btn btn-primary">获取验证码</button>              </div>            </div>          </form>        </div>        <div class="modal-footer">          <button type="button" onclick="submit()" class="btn btn-success">            提交更新          </button>        </div>      </div><!-- /.modal-content -->    </div><!-- /.modal-dialog -->  </div><!-- /.modal -->  <script src="../../js/jquery.min.js"></script>  <!-- Bootstrap -->  <script src="../../js/bootstrap.min.js"></script>  <!-- App -->  <script src="../../js/app.js"></script>  <script src="../../plugins/slimscroll/jquery.slimscroll.min.js"></script>  <script src="../../js/app.plugin.js"></script>  <script type="text/javascript" src="../../plugins/jPlayer/jquery.jplayer.min.js"></script>  <script type="text/javascript" src="../../plugins/jPlayer/add-on/jplayer.playlist.min.js"></script>  <script type="text/javascript" src="../../plugins/jPlayer/demo.js"></script>  <script src="../../js/index.js"></script>  <script>    var obj;    $(function () {       $('#navOperate').click();//打开导航栏        //退出系统       $('#logout').on('click',function () {          window.location.href = "/logout";       });       //account info        $.post("/main/index/init",{},function (res) {            obj = res.data.user;            //console.log(obj);            var type = obj.type;            var account = obj.account;            if(type>1){                $('#basic').show();                $('#basicOperate').show();            }else{                $('#basic').hide();                $('#basicOperate').hide();            }            if(!account){                $('#account').html("暂未设置账号");            }else{                $('#account').html("Hi,"+account);                $('#settingAccount').val(account);                $('#settingAccount').attr("disabled","true");            }            $('#settingId').val(obj.id);            //$('#password').val(obj.password);            $('#name').val(obj.nickname);            $('#phone').val(obj.phone);            var email = obj.email;            if(email){                $('#email').val(email);                $('#email').attr("disabled","true");            }        });        $('#setting').on('click',function () {            $('#settingModal').modal("show");            init();        });        $('#changeBtn').on('click',function () {            $('#email').attr("disabled",false);            $('#email').val("");            $(this).hide();            $('#codeInput').show();            $('#codeBtn').show();        });        $('#codeBtn').on('click',function () {            var email = $('#email').val().trim();            var reg = /^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/;            if(!email){                $('#tip').html("邮箱地址不能为空!");                return            }else{                if(!reg.test(email)){                    $('#tip').html('邮箱地址格式不正确!');                    return;                }else{                    var count = 60;                    $('#codeInput').val("");                    $('#codeBtn').attr("disabled",true);                    var interval = setInterval(function () {                        count--;                        $('#codeBtn').html("还剩 "+count+"s");                        if(count==0){                            $('#codeBtn').attr("disabled",false);                            $('#codeBtn').html("获取验证码");                            window.clearInterval(interval);                        }                    },1000);                    $('#tip').html("<span class='text-info text-sm'>验证码发送中...</span>");                    $.post('/main/user/getCode',{email:email},function (res) {                        if(res.code==1){                            $('#tip').html("<span class='text-success text-sm'>验证码已发送,请注意查收</span>");                        } else{                            $('#tip').html("<span class='text-danger text-sm'>"+res.msg+"</span>");                        }                    });                }            }        });    });    function submit(){        var id = $('#settingId').val();        var acc = obj.account;        var account;        if(!acc){            account = $('#settingAccount').val().trim();        }        var password = $('#password').val().trim();        if(!password){            $('#tip').html("<span class='text-danger text-sm'>密码不能为空!</span>");            return;        }        if(password.length<8){            $('#tip').html("<span class='text-danger text-sm'>密码长度过短!</span>");            return;        }        var nickname = $('#name').val().trim();        var phone = $('#phone').val().trim();        var isHide = $('#changeBtn').is(':visible');        //alert(isHide);        var email = $('#email').val().trim();        if(!email){            $('#tip').html("<span class='text-danger text-sm'>邮箱地址不能为空!</span>");            return;        }        var code;        if(!isHide){            code = $('#codeInput').val().trim();            if(!code){                $('#tip').html("<span class='text-danger text-sm'>验证码不能为空!</span>");                return            }        }        $('#tip').html("<span class='text-info text-sm'>数据交互中...</span>");        $.post("/main/user/update",            {                id:id,                account:account,                password:password,                nickname:nickname,                phone:phone,                email:email,                code:code            },function (res) {                if(res.code==1){                    window.location.href = "/main";                }else{                    $('#tip').html("<span class='text-danger text-sm'>"+res.msg+"</span>");                }            });    }    function init() {        $('#email').attr("disabled",true);        $('#email').val(obj.email);        $('#changeBtn').show();        $('#codeInput').hide();        $('#codeBtn').hide();    }  </script></body></html>